<div class="container g-mt-100">
  <div class="g-bg-main g-brd-blue text-center">
    <h1 class="h3 u-heading-v1__title">Thank you for your order</h1>
  </div>
  <div class="row">
    <div class="col-md-12 text-right">
      <a href="#!" class="btn btn-md u-btn-outline-teal g-mx-15 g-mb-15" routerLink="/{{currentEvent.name}}/order">New Order</a>
      <button class="btn btn-md u-btn-outline-pink g-mr-10 g-mb-15" (click)="printOrders(order.id)">
        Print Confirmation
      </button>
    </div>
  </div>
  <div class="u-heading-v1-5 g-bg-main g-brd-blue g-mb-20 text-center g-py-50">
    <h1 class="h3 u-heading-v1__title">Order Detail</h1>
  </div>
  <div class="row text-center">
    <div class="col-md-6 offset-md-3">
      <div class="u-shadow-v3 g-bg-white g-brd-around g-brd-gray-light-v4 g-line-height-2 g-pa-40 g-mb-30" role="alert">
        <h3 class="h2 g-font-weight-300 g-mb-20"></h3>
        <p class="mb-0">
          <span class="row">
            <dt class="col-md-6">Id :
            </dt>
            <dd class="col-md-6">{{order.id}}
            </dd>
          </span>
          <span class="row">
            <dt class="col-md-6">Reference:
            </dt>
            <dd class="col-md-6">{{order.customer_name}}
            </dd>
          </span>
          <span class="row">
            <dt class="col-md-6">Order Time:
            </dt>
            <dd class="col-md-6">{{order.created_at}}
            </dd>
          </span>
          <span class="row">
            <dt class="col-md-6">Current station :
            </dt>
            <dd class="col-md-6">S{{order.station.id}} - {{order.station.name}}
            </dd>
          </span>
          <span class="row">
            <dt class="col-md-6">Scheduled Order Time :
            </dt>
            <dd class="col-md-6">{{order.display_scheduled_order_time}}
            </dd>
          </span>
          <span class="row">
            <dt class="col-md-6">Total Value:
            </dt>
            <dd class="col-md-6">${{(order.value * 1).toFixed(2)}}
            </dd>
          </span>
        </p>
      </div>
    </div>
  </div>
  <div class="card g-brd-teal rounded-0 g-mb-30">
    <h3 class="card-header g-bg-teal g-brd-transparent g-color-white g-font-size-16 rounded-0 mb-0">
      <i class="fa fa-edit g-mr-5"></i>
      Order items
    </h3>

    <div class="table-responsive text-center">
      <table class="table table-striped u-table--v1 mb-0">
        <thead>
          <tr>
            <th>Item</th>
            <th>Price($)</th>
            <th>Quantity</th>
            <th>Total Price($)</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let item of order.order_items">
            <td>{{item.item}}</td>
            <td>${{(item.price * 1).toFixed(2)}}</td>
            <td>
              {{item.quantity}}
            </td>
            <td>${{(item.quantity * item.price).toFixed(2)}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div id="{{order.id}}" style="display: none; width: 90mm;">
      <div class="text-center">
        <div>
          <img src="{{ currentEvent.logo }}" style="width: 80px">
          <h1>{{currentEvent.published_name}}</h1>
        </div>
        <div style="font-size: 14px; font-weight: bold;">{{currentDate() | date:'dd.MM.yyyy HH:mm'}}</div>
        <div style="font-size: 14px; font-weight: bold;">GST Number: {{currentEvent.gst_number}}</div>
        <br />
        <table width="90%" style="font-size: 14px;">
          <tr>
            <td width="25%"></td>
            <td width="35%" style="font-weight: bold;">Name:</td>
            <td width="25%">{{order.account?.name}}</td>
          </tr>
          <tr>
            <td width="25%"></td>
            <td width="35%" style="font-weight: bold;">Contact Name:</td>
            <td width="25%">{{order.account?.contact_name}}</td>
          </tr>
          <tr>
            <td width="25%"></td>
            <td width="35%" style="font-weight: bold;">Email:</td>
            <td width="25%">{{order.account?.email}}</td>
          </tr>
          <tr>
            <td width="25%"></td>
            <td width="35%" style="font-weight: bold;">Phone:</td>
            <td width="25%">{{order.account?.phone}}</td>
          </tr>
        </table>
        <table width="90%" style="font-size: 14px;">
          <thead>
            <tr>
              <td width="65%">Item</td>
              <td width="25%">Qty</td>
              <td width="25%">Value</td>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let i of order.order_items | groupBy: 'category_name'">
              <table width="90%" style="font-size: 14px;">
                <div style="font-size: 15px; text-align: left;">{{i.key}}</div>
                <tr *ngFor="let order_item of i.value">
                  <td width="65%">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{order_item.item}}<br>

                    <small *ngIf="order_item.notes != null && order_item.notes != ''">({{order_item.notes}})</small>
                  </td>
                  <td width="25%">{{order_item.quantity}}</td>
                  <td width="25%">${{(order_item.price * order_item.quantity).toFixed(2)}}</td>
                </tr>
              </table>
            </tr>
            <br />
            <table width="90%" style="font-size: 14px;">
              <tr>
                <td width="65%">TOTAL</td>
                <td width="25%">{{order.total_quantity}}</td>
                <td width="25%">${{(order.value * 1).toFixed(2)}}</td>
              </tr>
            </table>
          </tbody>
        </table>
        <br />
        <div style="font-size: 14px;"><b>Comments:</b> {{order.comments}} </div>
        <br>
        <div style="font-size: 14px;">Thank you for shopping with us!</div>
        <br><br>
        <hr>
        <br>
        <br>
      </div>
    </div>
  </div>
</div>
